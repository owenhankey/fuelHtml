<!DOCTYPE html>
<html>

<head>
  <style>
    /* Styles here */
  </style>
</head>

<body>
  <div class="container">
    <h1>Fuel Form</h1>
    <form id="fuelForm">
      <div>
        <label for="name">Name:</label>
        <select id="name" name="name">
          <option value="Owen">Owen</option>
          <option value="Anthea">Anthea</option>
          <option value="Athol">Athol</option>
          <option value="Norman">Norman</option>
        </select>
      </div>
      <div>
        <label for="kms">Kilometers Driven:</label>
        <input type="number" id="kms" name="kms" required>
      </div>
      <div>
        <label for="fuelEconomy">Fuel Economy (l/100km):</label>
        <input type="number" step="0.01" id="fuelEconomy" name="fuelEconomy" required>
      </div>
      <div>
        <label for="totalKms">Total Kilometers:</label>
        <input type="number" id="totalKms" name="totalKms" required>
      </div>
      <div>
        <label for="totalPaid">Total Paid:</label>
        <input type="number" step="0.01" id="totalPaid" name="totalPaid" disabled>
      </div>
      <div>
        <label for="cost">Cost (â‚¬/litre):</label>
        <input type="number" step="0.01" id="cost" name="cost" disabled>
      </div>
      <div>
        <input type="checkbox" id="paid" name="paid">
        <label for="paid">Paid</label>
      </div>
      <div>
        <button type="submit">Submit</button>
      </div>
    </form>
    <p id="message" class="message"></p>
  </div>

  <script>
    const form = document.getElementById('fuelForm');
    const nameElement = document.getElementById('name');
    const kmsElement = document.getElementById('kms');
    const fuelEconomyElement = document.getElementById('fuelEconomy');
    const totalKmsElement = document.getElementById('totalKms');
    const totalPaidElement = document.getElementById('totalPaid');
    const costElement = document.getElementById('cost');
    const paidElement = document.getElementById('paid');
    const messageElement = document.getElementById('message');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      if (paidElement.checked && (!totalPaidElement.value || !costElement.value)) {
        showMessage('Please enter Total Paid and Cost.', false);
      } else {
        const data = {
          name: nameElement.value,
          kms: parseFloat(kmsElement.value),
          fuelEconomy: parseFloat(fuelEconomyElement.value),
          totalKms: parseFloat(totalKmsElement.value),
          totalPaid: parseFloat(totalPaidElement.value),
          cost: parseFloat(costElement.value),
          paid: paidElement.checked
        };

        if (data.paid) {
          // Send POST request
          const requestData = {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          };

          fetch('https://vyaky9w2kl.execute-api.us-east-1.amazonaws.com/fuelPaid', requestData)
            .then(response => response.json())
            .then(responseData => {
              showMessage(`Form submitted successfully. Response: ${JSON.stringify(responseData)}`, true);
            })
            .catch(error => {
              showMessage(`An error occurred. ${error}`, false);
            });
        } else {
          // Send GET request
          const url = `https://vyaky9w2kl.execute-api.us-east-1.amazonaws.com/fuelEconomy?name=${encodeURIComponent(data.name)}&kms=${encodeURIComponent(data.kms)}&fuelEconomy=${encodeURIComponent(data.fuelEconomy)}&totalKms=${encodeURIComponent(data.totalKms)}&totalPaid=${encodeURIComponent(data.totalPaid)}&cost=${encodeURIComponent(data.cost)}`;

          fetch(url)
            .then(response => response.json())
            .then(responseData => {
              showMessage(`Form submitted successfully. Response: ${JSON.stringify(responseData)}`, true);
            })
            .catch(error => {
              showMessage(`An error occurred. ${error}`, false);
            });
        }
      }
    });

    function showMessage(message, isSuccess) {
      messageElement.textContent = message;
      messageElement.className = isSuccess ? 'message success' : 'message error';
    }

    paidElement.addEventListener('change', function () {
      const isChecked = this.checked;
      totalPaidElement.disabled = !isChecked;
      costElement.disabled = !isChecked;
    });
  </script>
</body>

</html>
